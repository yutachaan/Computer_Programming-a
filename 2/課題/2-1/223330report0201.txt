/*
 * 科目：ソフトウェア演習Ⅰa
 * 学籍番号・氏名：B223330・佐藤 優太
 * 課題番号：課題2-1
 * 提出日：2022年4月26日
 * 使用コンパイラ：gcc version 11.2.0
*/


#include <stdio.h>
#include <stdlib.h>

// 文字列sの長さを返す
int size_s(char *s) {
  int ret = 0;

  // 文字列の最後には\0(ヌル文字)が入っているため，それが見つかるまでカウントアップ
  while (*s++ != '\0')ret++;

  return ret - 1;
}

// 文字列sをreverse
void reverse(char *s) {
  int size = size_s(s);

  // i文字目とsize-i-1文字目をswap (0-indexed)
  for (int i = 0; i < size / 2; i++) {
    char temp = s[i];
    s[i] = s[size - 1 - i];
    s[size - 1 - i] = temp;
  }

  return;
}


int main(int argc, char *argv[]) {
  FILE *file;
  char buf[512];

  if ((file = fopen(argv[1], "r")) == NULL) exit(1);

  // 1行ずつ読み込み，reverseして出力
  while(fgets(buf,sizeof(buf), file) != NULL) {
    reverse(buf);

    printf("%s", buf);
  }

  fclose(file);
}



/*
実行結果:
% gcc -o 2-1 2-1.c
% ./2-1 Alice_in_Wonderland.txt
.DNALREDNOW NI SERUTNEVDA S'ECILA                

llorraC siweL                          

.0.3 NOITIDE MURCLUF MUINNELLIM EHT               




I RETPAHC                            

eloH-tibbaR eht nwoD                      


retsis reh yb gnittis fo derit yrev teg ot gninnigeb saw ecilA  
dah ehs eciwt ro ecno  :od ot gnihton gnivah fo dna ,knab eht no
on dah ti tub ,gnidaer saw retsis reh koob eht otni depeep
',koob a fo esu eht si tahw dna` ,ti ni snoitasrevnoc ro serutcip
'?noitasrevnoc ro serutcip tuohtiw` ecilA thguoht

*/
